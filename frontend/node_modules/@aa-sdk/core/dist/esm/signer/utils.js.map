{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/signer/utils.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,MAAM,EACN,mBAAmB,EACnB,kBAAkB,GAInB,MAAM,MAAM,CAAC;AAQd;;;;;;;;;;;;;;;;;;;GAmBG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,CAAC,EACpC,cAAc,EACd,eAAe,EACf,SAAS,GACU,EAAQ,EAAE;IAC7B,yEAAyE;IACzE,UAAU;IACV,eAAe;IACf,kEAAkE;IAClE,+BAA+B;IAC/B,gBAAgB;IAChB,IAAI;IACJ,OAAO,MAAM,CAAC;QACZ,mBAAmB,CAAC,kBAAkB,CAAC,uBAAuB,CAAC,EAAE;YAC/D,cAAc;YACd,eAAe;YACf,SAAS;SACV,CAAC;QACF,oEAAoE;KACrE,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import {\n  concat,\n  encodeAbiParameters,\n  parseAbiParameters,\n  type Address,\n  type Hash,\n  type Hex,\n} from \"viem\";\n\nexport type SignWith6492Params = {\n  factoryAddress: Address;\n  factoryCalldata: Hex;\n  signature: Hash;\n};\n\n/**\n * Wraps a given signature with additional data following the EIP-6492 standard.\n *\n * @example\n * ```ts\n * import { wrapSignatureWith6492 } from \"@aa-sdk/core\";\n *\n * const signature = wrapSignatureWith6492({\n *  factoryAddress: \"0x...\",\n *  factoryCalldata: \"0x...\",\n *  signature: \"0x...\",\n * });\n * ```\n *\n * @param {SignWith6492Params} params The parameters to wrap the signature\n * @param {Hex} params.factoryAddress The address of the factory\n * @param {Hex} params.factoryCalldata The calldata for the factory\n * @param {Hex} params.signature The original signature that needs to be wrapped\n * @returns {Hash} The wrapped signature\n */\nexport const wrapSignatureWith6492 = ({\n  factoryAddress,\n  factoryCalldata,\n  signature,\n}: SignWith6492Params): Hash => {\n  // wrap the signature as follows: https://eips.ethereum.org/EIPS/eip-6492\n  // concat(\n  //  abi.encode(\n  //    (create2Factory, factoryCalldata, originalERC1271Signature),\n  //    (address, bytes, bytes)),\n  //    magicBytes\n  // )\n  return concat([\n    encodeAbiParameters(parseAbiParameters(\"address, bytes, bytes\"), [\n      factoryAddress,\n      factoryCalldata,\n      signature,\n    ]),\n    \"0x6492649264926492649264926492649264926492649264926492649264926492\",\n  ]);\n};\n"]}